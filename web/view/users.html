<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Primeiro exemplo</title>
        <link rel="stylesheet" type="text/css" href="/bootstrap/dist/css/bootstrap.min.css"/>
        <link rel="stylesheet" type="text/css" href="/bootstrap/dist/css/bootstrap-theme.min.css"/>
        <link href='/estilo.css' rel='stylesheet' type='text/css'>
        <script src="/snowstorm-min.js"></script>
    </head>
    <body>
        <h1 id="title">API usuários!</h1>
        <div class="wrapper">
            <h2>Formulário</h2>
            <form action="/users/addUser" method="GET">
                <p><label>name:</label><input type="text" name="name"></p>
                <p><label>pass:</label><input type="text" name="pass"></p>
                <p><label>vocation:</label><input type="text" name="vocation"></p>
                <button type="submit" class="btn btn-success">Submit</button>
            </form>
            <h2>Query</h2>
            <form action="/users/queryUser" method="GET">
                <p><label>name:</label><input type="text" name="name"></p>
                <button type="submit" class="btn btn-info">Search</button>
            </form>
            <h2>List</h2>
            <form action="/users/listUser" method="GET">
                <button type="submit" class="btn btn-info">Listar</button>
            </form>
            <div id="id01"></div>
            <script>
                var xmlhttp = new XMLHttpRequest();
                var url = "http://localhost:8081/users/listUser";

                xmlhttp.onreadystatechange=function() {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        myFunction(xmlhttp.responseText);
                    }
                }
                xmlhttp.open("GET", url, true);
                xmlhttp.send();
                function myFunction(response) {
                    var data = JSON.parse(response);
                    var out = "<table>";
                    for (var prop in data) {
                        out += "<tr><td>" +
                        data[prop].name +
                        "</td><td>" +
                        data[prop].pass +
                        "</td></tr>";
                    }
                    out += "</table>";
                    alert(out);
                    document.getElementById("id01").innerHTML = out;
                }
            </script>
        </div>
    </body>
</html>